(this.webpackJsonpmyreads=this.webpackJsonpmyreads||[]).push([[0],{15:function(e,o,s){},16:function(e,o,s){},21:function(e,o,s){"use strict";s.r(o);var t=s(2),c=s(8),a=s.n(c),n=s(25),r=(s(15),s(16),s(24)),l=s(9);const h="https://reactnd-books-api.udacity.com";let j=localStorage.token;j||(j=localStorage.token=Math.random().toString(36).substr(-8));const i={Accept:"application/json",Authorization:j};var b=s(0);var d=e=>{const[o,s]=Object(t.useState)(e.shelf);return Object(b.jsx)("div",{className:"book-shelf-changer",children:Object(b.jsxs)("select",{value:o,onChange:o=>{o.preventDefault(),s(o.target.value),e.onMove(e.book,o.target.value)},children:[Object(b.jsx)("option",{value:"none",disabled:!0,children:"Move to..."}),Object(b.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(b.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(b.jsx)("option",{value:"read",children:"Read"}),Object(b.jsx)("option",{value:"none",children:"None"})]})})};var v=e=>{const{book:o,shelf:s,onMove:t}=e;return Object(b.jsx)("li",{children:Object(b.jsxs)("div",{className:"book",children:[Object(b.jsxs)("div",{className:"book-top",children:[Object(b.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:`url(${o.imageLinks.thumbnail})`}}),Object(b.jsx)(d,{book:o,shelf:s,onMove:t})]}),Object(b.jsx)("div",{className:"book-title",children:o.title}),Object(b.jsx)("div",{className:"book-authors",children:o.authors&&o.authors.join(", ")})]})})};var k=e=>{const{shelf:o,books:s,onMove:t}=e,c=s.filter((e=>e.shelf===o.key));return Object(b.jsxs)("div",{className:"bookshelf",children:[Object(b.jsx)("h2",{className:"bookshelf-title",children:o.name}),Object(b.jsx)("div",{className:"bookshelf-books",children:Object(b.jsx)("ol",{className:"books-grid",children:c.map((e=>Object(b.jsx)(v,{book:e,shelf:o.key,onMove:t},e.id)))})})]})};var u=e=>{const{bookshelves:o,books:s,onMove:t}=e;return Object(b.jsx)("div",{className:"list-books-content",children:Object(b.jsx)("div",{children:o.map((e=>Object(b.jsx)(k,{shelf:e,books:s,onMove:t},e.key)))})})},O=s(23);var x=()=>Object(b.jsx)("div",{className:"open-search",children:Object(b.jsx)(O.a,{to:"Search",children:Object(b.jsx)("button",{children:"Add a Book"})})});var m=e=>{const{bookshelves:o,books:s,onMove:t}=e;return Object(b.jsxs)("div",{className:"list-books",children:[Object(b.jsx)("div",{className:"list-books-title",children:Object(b.jsx)("h1",{children:"MyReads"})}),Object(b.jsx)(u,{bookshelves:o,books:s,onMove:t}),Object(b.jsx)(x,{})]})};var p=e=>{const{myBooks:o,searchBooks:s,onMove:t}=e,c=s.map((e=>(o.map((o=>(o.id===e.id&&(e.shelf=o.shelf),o))),e)));return Object(b.jsx)("div",{className:"search-books-results",children:Object(b.jsx)("ol",{className:"books-grid",children:c.map((e=>Object(b.jsx)(v,{book:e,shelf:e.shelf?e.shelf:"none",onMove:t},e.id)))})})};var f=e=>{const{onResetSearch:o}=e;return Object(b.jsx)(O.a,{to:"/",children:Object(b.jsx)("button",{className:"close-search",onClick:o,children:"Close"})})};var y=e=>{const[o,s]=Object(t.useState)("");return Object(b.jsx)("div",{className:"search-books-input-wrapper",children:Object(b.jsx)("input",{type:"text",value:o,placeholder:"Search by title, author, or ISBN",onChange:o=>{o.preventDefault(),s(o.target.value),e.onSearch(o.target.value)},autoFocus:!0})})};var N=e=>{const{onSearch:o,onResetSearch:s}=e;return Object(b.jsxs)("div",{className:"search-books-bar",children:[Object(b.jsx)(f,{onResetSearch:s}),Object(b.jsx)(y,{onSearch:o})]})};var S=e=>{const{searchBooks:o,myBooks:s,onSearch:t,onResetSearch:c,onMove:a}=e;return Object(b.jsxs)("div",{className:"search-books",children:[Object(b.jsx)(N,{onSearch:t,onResetSearch:c}),Object(b.jsx)(p,{searchBooks:o,myBooks:s,onMove:a})]})};var g=()=>{const e=[{key:"currentlyReading",name:"Currently Reading"},{key:"wantToRead",name:"Want to Read"},{key:"read",name:"Have Read"}],[o,s]=Object(t.useState)([]),[c,a]=Object(t.useState)([]);Object(t.useEffect)((()=>{fetch(`${h}/books`,{headers:i}).then((e=>e.json())).then((e=>e.books)).then((e=>{s(e)}))}),[]);const n=(e,t)=>{((e,o)=>{fetch(`${h}/books/${e.id}`,{method:"PUT",headers:{...i,"Content-Type":"application/json"},body:JSON.stringify({shelf:o})}).then((e=>e.json()))})(e,t);let c=[];c=o.filter((o=>o.id!==e.id)),"none"!==t&&(e.shelf=t,c=c.concat(e)),s(c)},j=Object(l.debounce)(300,!1,(e=>{e.length>0?((e,o)=>fetch(`${h}/search`,{method:"POST",headers:{...i,"Content-Type":"application/json"},body:JSON.stringify({query:e,maxResults:o})}).then((e=>e.json())).then((e=>e.books)))(e).then((e=>{e.error?a([]):a(e)})):a([])})),d=()=>{a([])};return Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)(r.a,{exact:!0,path:"/",render:()=>Object(b.jsx)(m,{bookshelves:e,books:o,onMove:n})}),Object(b.jsx)(r.a,{path:"/search",render:()=>Object(b.jsx)(S,{searchBooks:c,myBooks:o,onSearch:j,onMove:n,onResetSearch:d})})]})};a.a.render(Object(b.jsx)(n.a,{basename:"/My_Read",children:Object(b.jsx)(g,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.03b65ec3.chunk.js.map